<!DOCTYPE HTML>
<html lang="en">
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Common Headers | Introduction</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-anchors/plugin.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../headers/ProprietaryHeaders.html">
    
    
    <link rel="prev" href="../common-data-objects/CommonDataObjects.html">
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="15" data-chapter-title="Common Headers" data-filepath="headers/CommonHeaders.md" data-basepath=".." data-revision="Tue Feb 28 2017 15:51:02 GMT+0000 (UTC)" data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="1" data-path="TOC.html">
            
                
                    <a href="../TOC.html">
                
                        <i class="fa fa-check"></i>
                        
                            
                        
                        Table of Contents
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i><b>1.</b>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="design-principles/DesignPrinciples.html">
            
                
                    <a href="../design-principles/DesignPrinciples.html">
                
                        <i class="fa fa-check"></i><b>2.</b>
                        
                            
                        
                        Principles
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="general-guidelines/GeneralGuidelines.html">
            
                
                    <a href="../general-guidelines/GeneralGuidelines.html">
                
                        <i class="fa fa-check"></i><b>3.</b>
                        
                            
                        
                        General Guidelines
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="security/Security.html">
            
                
                    <a href="../security/Security.html">
                
                        <i class="fa fa-check"></i><b>4.</b>
                        
                            
                        
                        Security
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5" data-path="compatibility/Compatibility.html">
            
                
                    <a href="../compatibility/Compatibility.html">
                
                        <i class="fa fa-check"></i><b>5.</b>
                        
                            
                        
                        Compatibility
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="json-guidelines/JsonGuidelines.html">
            
                
                    <a href="../json-guidelines/JsonGuidelines.html">
                
                        <i class="fa fa-check"></i><b>6.</b>
                        
                            
                        
                        JSON Guidelines
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="naming/Naming.html">
            
                
                    <a href="../naming/Naming.html">
                
                        <i class="fa fa-check"></i><b>7.</b>
                        
                            
                        
                        Naming
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="resources/Resources.html">
            
                
                    <a href="../resources/Resources.html">
                
                        <i class="fa fa-check"></i><b>8.</b>
                        
                            
                        
                        Resources
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="http/Http.html">
            
                
                    <a href="../http/Http.html">
                
                        <i class="fa fa-check"></i><b>9.</b>
                        
                            
                        
                        HTTP
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="performance/Performance.html">
            
                
                    <a href="../performance/Performance.html">
                
                        <i class="fa fa-check"></i><b>10.</b>
                        
                            
                        
                        Performance
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11" data-path="pagination/Pagination.html">
            
                
                    <a href="../pagination/Pagination.html">
                
                        <i class="fa fa-check"></i><b>11.</b>
                        
                            
                        
                        Pagination
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="12" data-path="hyper-media/Hypermedia.html">
            
                
                    <a href="../hyper-media/Hypermedia.html">
                
                        <i class="fa fa-check"></i><b>12.</b>
                        
                            
                        
                        Hypermedia
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13" data-path="data-formats/DataFormats.html">
            
                
                    <a href="../data-formats/DataFormats.html">
                
                        <i class="fa fa-check"></i><b>13.</b>
                        
                            
                        
                        Data Formats
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="14" data-path="common-data-objects/CommonDataObjects.html">
            
                
                    <a href="../common-data-objects/CommonDataObjects.html">
                
                        <i class="fa fa-check"></i><b>14.</b>
                        
                            
                        
                        Common Data Objects
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="15" data-path="headers/CommonHeaders.html">
            
                
                    <a href="../headers/CommonHeaders.html">
                
                        <i class="fa fa-check"></i><b>15.</b>
                        
                            
                        
                        Common Headers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16" data-path="headers/ProprietaryHeaders.html">
            
                
                    <a href="../headers/ProprietaryHeaders.html">
                
                        <i class="fa fa-check"></i><b>16.</b>
                        
                            
                        
                        Proprietary Headers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="17" data-path="deprecation/Deprecation.html">
            
                
                    <a href="../deprecation/Deprecation.html">
                
                        <i class="fa fa-check"></i><b>17.</b>
                        
                            
                        
                        Deprecation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="18" data-path="api-operation/ApiOperation.html">
            
                
                    <a href="../api-operation/ApiOperation.html">
                
                        <i class="fa fa-check"></i><b>18.</b>
                        
                            
                        
                        API Operation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="19" data-path="events/events.html">
            
                
                    <a href="../events/events.html">
                
                        <i class="fa fa-check"></i><b>19.</b>
                        
                            
                        
                        Events
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="20" data-path="references/References.html">
            
                
                    <a href="../references/References.html">
                
                        <i class="fa fa-check"></i><b>20.</b>
                        
                            
                        
                        References
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="21" data-path="tooling/Tooling.html">
            
                
                    <a href="../tooling/Tooling.html">
                
                        <i class="fa fa-check"></i><b>21.</b>
                        
                            
                        
                        Tooling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="22" data-path="changelog/Changelog.html">
            
                
                    <a href="../changelog/Changelog.html">
                
                        <i class="fa fa-check"></i><b>22.</b>
                        
                            
                        
                        Changelog
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../">Introduction</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="common-headers">Common Headers</h1>
<p>This section describes a handful of headers, which we found raised the most questions in our daily usage, or which are useful in particular circumstances but not widely known.</p>
<h2 id="must-use-content-headers-correctly"><span style="color:red;font-weight:bold">Must:</span> Use Content Headers Correctly</h2>
<p>Content or entity headers are headers with a <code>Content-</code> prefix. They describe the content of the body of the message and
they can be used in both, HTTP requests and responses. Commonly used content headers include but are not limited to:</p>
<ul>
<li><a href="https://tools.ietf.org/html/rfc6266" target="_blank"><code>Content-Disposition</code></a> can indicate that the representation is supposed to be saved as a file, and the proposed file name.</li>
<li><a href="https://tools.ietf.org/html/rfc7231#section-3.1.2.2" target="_blank"><code>Content-Encoding</code></a> indicates compression or encryption algorithms applied to the content.</li>
<li><a href="https://tools.ietf.org/html/rfc7230#section-3.3.2" target="_blank"><code>Content-Length</code></a> indicates the length of the content (in bytes).</li>
<li><a href="https://tools.ietf.org/html/rfc7231#section-3.1.3.2" target="_blank"><code>Content-Language</code></a> indicates that the body is meant for people literate in some human language(s).</li>
<li><a href="https://tools.ietf.org/html/rfc7231#section-3.1.4.2" target="_blank"><code>Content-Location</code></a> indicates where the body can be found otherwise (<a href="CommonHeaders.html#could-use-contentlocation-header">see below for more details</a>).</li>
<li><a href="https://tools.ietf.org/html/rfc7233#section-4.2" target="_blank"><code>Content-Range</code></a> is used in responses to range requests to indicate which part of the requested resource representation is delivered with the body.</li>
<li><a href="https://tools.ietf.org/html/rfc7231#section-3.1.1.5" target="_blank"><code>Content-Type</code></a> indicates the media type of the body content.</li>
</ul>
<h2 id="could-use-contentlocation-header"><span style="color:green;font-weight:bold">Could:</span> Use Content-Location Header</h2>
<p>The Content-Location header is <em>optional</em> and can be used in successful write operations (PUT, POST or PATCH) or read operations (GET, HEAD) to guide caching and signal a receiver the actual location of the resource transmitted in the response body. This allows clients to identify the resource and to update their local copy when receiving a response with this header.</p>
<p>The Content-Location header can be used to support the following use cases:</p>
<ul>
<li>For reading operations GET and HEAD, a different location than the requested URI can be used to indicate that the returned resource is subject to content negotiations, and that the value provides a more specific identifier of the resource.</li>
<li>For writing operations PUT and PATCH, an identical location to the requested URI, can be used to explicitly indicate that the returned resource is the current representation of the newly created or updated resource.</li>
<li>For writing operations POST and DELETE, a content location can be used to indicate that the body contains a status report resource in response to the requested action, which is available at provided location.</li>
</ul>
<p><strong>Note</strong>: When using the Content-Location header, the Content-Type header has to be set as well. For example:</p>
<pre><code class="lang-http"><span class="hljs-request">GET <span class="hljs-string">/products/123/images</span> HTTP/1.1</span>

<span class="http"><span class="hljs-status">HTTP/1.1 <span class="hljs-number">200</span> OK</span>
<span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">image/png</span>
<span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/products/123/images?format=raw</span>
</span></code></pre>
<h2 id="should-use-location-header-instead-of-contentlocation-header"><span style="color:darkgoldenrod;font-weight:bold">Should:</span> Use Location Header instead of Content-Location Header</h2>
<p>As the correct usage of Content-Location with respect to semantics and caching is difficult, we <em>discourage</em> the use of Content-Location. In most cases it is sufficient to direct clients to the resource location by using the Location header instead without hitting the Content-Location specific ambiguities and complexities.</p>
<p>More details in RFC 7231 <a href="https://tools.ietf.org/html/rfc7231#section-7.1.2" target="_blank">7.1.2 Location</a>, <a href="https://tools.ietf.org/html/rfc7231#section-3.1.4.2" target="_blank">3.1.4.2 Content-Location</a></p>
<h2 id="could-use-the-prefer-header-to-indicate-processing-preferences"><span style="color:green;font-weight:bold">Could:</span> Use the Prefer header to indicate processing preferences</h2>
<p>The  <code>Prefer</code> header defined in <a href="https://tools.ietf.org/html/rfc7240" target="_blank">RFC7240</a> allows clients to request processing behaviors from servers. <a href="https://tools.ietf.org/html/rfc7240" target="_blank">RFC7240</a> pre-defines a number of preferences and is extensible, to allow others to be defined. Support for the Prefer header is entirely optional and at the discretion of API designers, but as an existing Internet Standard, is recommended over defining proprietary &quot;X-&quot; headers for processing directives. </p>
<p>The <code>Prefer</code> header can defined like this in an API definition:</p>
<pre><code class="lang-yaml">  Prefer:
    name: Prefer
    description: |
      The RFC7240 Prefer header indicates that particular server 
      behaviors are preferred by the client but are not required 
      for successful completion of the request. 

      # (indicate the preferences supported by the API)

    in: header
    type: string  
    required: false
</code></pre>
<p>Supporting APIs may return the <code>Preference-Applied</code> header also defined in <a href="https://tools.ietf.org/html/rfc7240" target="_blank">RFC7240</a> to indicate whether the preference was applied.</p>
<h2 id="could-consider-using-etag-together-with-ifnonematch-header"><span style="color:green;font-weight:bold">Could:</span> Consider using ETag together with If-(None-)Match header</h2>
<p>When creating or updating resources it may be necessary to expose conflicts and to prevent the lost update
problem. This can be best accomplished by using the <a href="https://tools.ietf.org/html/rfc7232#section-2.3" target="_blank"><code>ETag</code></a>
header together with the <a href="https://tools.ietf.org/html/rfc7232#section-3.1" target="_blank"><code>If-Match</code></a> and 
<a href="https://tools.ietf.org/html/rfc7232#section-3.2" target="_blank"><code>If-None-Match</code></a>. The contents of an <code>ETag: &lt;entity-tag&gt;</code>
header is either (a) a hash of the response body, (b) a hash of the last modified field of the entity, or
(c) a version number or identifier of the entity version.</p>
<p>To expose conflicts between concurrent update operations via PUT, POST, or PATCH, the <code>If-Match: &lt;entity-tag&gt;</code>
header can be used to force the server to check whether the version of the updated entity is conforming to the
requested <code>&lt;entity-tag&gt;</code>. If no matching entity is found, the operation is supposed a to respond with status
code 412 - precondition failed.</p>
<p>Beside other use cases, the <code>If-None-Match:</code> header with parameter <code>*</code> can be used in a similar way to expose
conflicts in resource creation. If any matching entity is found, the operation is supposed a to respond with
status code 412 - precondition failed.</p>
<p>The <code>ETag</code>, <code>If-Match</code>, and <code>If-None-Match</code> headers can be defined as follows in the API definition:</p>
<pre><code class="lang-yaml">  Etag:
    name: Etag
    description: |
      The RFC7232 ETag header field in a response provides the current entity-tag for the
      selected resource. An entity-tag is an opaque identifier for different versions of
      a resource over time, regardless whether multiple versions are valid at the same time.
      An entity-tag consists of an opaque quoted string, possibly prefixed by a weakness
      indicator.

    in: header
    type: string
    required: false
    example: W/&quot;xy&quot;, &quot;5&quot;, &quot;7da7a728-f910-11e6-942a-68f728c1ba70&quot;

  IfMatch:
    name: If-Match
    description: |
      The RFC7232 If-Match header field in a request requires the server to only operate
      on the resource that matches at least one of the provided entity-tags. This allows
      clients express a precondition that prevent the method from being applied, if there
      have been any changes to the resource.

    in: header
    type: string
    required: false
    example:  &quot;5&quot;, &quot;7da7a728-f910-11e6-942a-68f728c1ba70&quot;

  IfNoneMatch:
    name: If-None-Match
    description: |
      The RFC7232 If-None-Match header field in a request requires the server to only
      operate on the resource if it does not match any of the provided entity-tags. If
      the provided entity-tag is `*`, it is required that the resource does not exist
      at all.

    in: header
    type: string
    required: false
    example: &quot;7da7a728-f910-11e6-942a-68f728c1ba70&quot;, *
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../common-data-objects/CommonDataObjects.html" class="navigation navigation-prev " aria-label="Previous page: Common Data Objects"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../headers/ProprietaryHeaders.html" class="navigation navigation-next " aria-label="Next page: Proprietary Headers"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-edit-link/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"structured-toc":{},"gitbook-restructure-navigation":{"transformations":[{"from":0,"to":1}]},"edit-link":{"base":"https://github.com/zalando/restful-api-guidelines/edit/master","label":"Edit This Page"},"restructure-navigation":{},"anchors":{},"highlight":{},"search":{"maxIndexSize":1000000},"fontsettings":{"family":"sans","size":2,"theme":"white"}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
